{"posts":[{"title":"写Bug","content":"1、下载文件链接检查1、下载文件链接检查遇到一个问题，返回的下载链接可能无法下载文件（GET请求链接），而我返回给前端的链接是不走我服务的链接，如果文件存在则可以下载，如果文件不存在对方服务器上，也能下载，但是下载的文件是0KB。这就比较烦恼了，我想后端做个检查，OK的话就返回给前端，但是有个问题，如果文件大小过大，使用服务器去下载文件，把文件下载到内存，就浪费内存甚至还有OOM的风险，那么有什么办法不下载文件知道文件的大小呢？去对方服务上加个检查文件的接口也行(笑😀)。这时候只好用Head请求了，先准备环境，在测试服务器上创建个1GB的文件和正常3MB的文件：比如创建一个1GB的文件failocate-l1GBtest.tar测试请求代码如下：privatestaticbooleancheckFile(Stringurl)throwsIOException{//本次测试链接不需要重定向HttpURLConnection.setFollowRedirects(false);//打开链接HttpURLConnectionconnection=(HttpURLConnection)newURL(url).openConnection();//设置发送HEAD请求实际不会返回请求体connection.setRequestMethod(&quot;HEAD&quot;);//设置超时事件connection.setReadTimeout(30_0000);connection.setConnectTimeout(30_0000);//输出请求体大小System.out.println(connection.getContentLength());returnconnection.getResponseCode()==HttpURLConnection.HTTP_OK;}这样就可以愉快的请求文件，获取文件大小，但是不接受请求体啦，也就没有请求文件大小过大，OOM的风险啦。PS:组内网关不支持HEAD请求，最后导致生产事故啦参考链接：https://stackoverflow.com/questions/19755016/","link":"https://zdylzdyl.github.io/post/nake_bugs/"},{"title":"函数式编程笔记","content":"函数式编程笔记[TOC]函数式编程笔记一、认识一、认识开始提问：什么是函数？是被称为函数定义域（functiondomain）的源集（sourceset）和被称为函数陪域（也nctioncodomain）的目标集（targetset）之间的关系。函数:一个数集映射成另一个值数集的方法什么是函数式编程？需要接收参数返回确定值，不修改参数。它是独立的。它并不依赖于任何外部的设备来工作。你可以在任何上下文中使用它一一你需要做的一切就是提供一个有效的参数。它是确定的，意味着相同的参数总是返回相同的结果。在引用透明的代码中，不会有意外发生。它可能返回一个错误的结果，可至少结果对于相同的参数而言是绝对不会变化的。它绝对不会抛出任何种类的Exceptio口。它可能抛出错误，例如OOME(out-of-memoryerror，即内存耗尽）或是SOE(stack-overflowerror，即堆栈溢出），但是这些错误表示代码有bug，并不是作为程序员的你或是你API的用户应该处理的（除了让应用程序崩溃井最终修复bug）。任何时候它都不会导致其他代码意外失败。例如，它不会改变参数或是外界的数据，从而导致调用者发现自己的数据过期或者并发访问异常。它不会由于外部设备（数据库、文件系统或网络）不可用、太慢或坏掉而崩溃。","link":"https://zdylzdyl.github.io/post/java_function/"},{"title":"Idea帮助指南","content":"JavaToolGithub入门通识：https://github.com/judasn/IntelliJ-IDEA-Tutorial[Toc]1.IntelliJIDEA1.启动优化64位机器修改idea64.exe.vmoptions，32位机器修改类似vmoptions文件即可，内存4GB机器无须修改，如下为16GB机器内存方案#程序启动时占用内存大小。jvm初始化大小为1G-Xms1g#程序运行期间最大可占用的内存大小。jvm最大大小为2G-Xmx2054m#用于设置CodeCache大小，JIT编译的代码都放在CodeCache中，若CodeCache空间不足则JIT无法继续编译，并且会去优化，比如编译执行改为解释执行，由此，性能会降-XX:ReservedCodeCacheSize=512m#添加作者信息-Duser.name=DonaldTrump2.新项目默认设置idea的Setting是关于当前项目的设置，新项目（所有项目的设置）及新项目结构设置是不受Setting设置影响的，为了避免每次新建项目重新进行相同的项目设置，需要调整好idea的默认设置。2.1StructureForNewProjects操作：File-&gt;OtherSettings-&gt;StructureForNewProjects新建项目的默认结构设置，选择好默认JDK为JDK1.8，选择项目语言级别为8.其他无须设置。2.2SettingsForNewProjects操作：File-&gt;OtherSettings-&gt;SettingsForNewProjects新建项目的默认设置2.2.1常用编码设置Editor-&gt;FileEncodings-&gt;全部选择UTF-8即可PS:对于Properties文件，勾选重要属性Transparentnative-to-asciiconversion主要用于转换ascii，一般都要勾选，不然Properties文件中的注释显示的都不会是中文。默认情况下IntelliJIDEA使用的编译器是javac，而此编译只能编译无BOM的文件2.2.2编码模板Editor-&gt;FileandCodeTemplates选择Files标签下，分别修改Class/Interface/Enum/AnnotationType.添加默认作者和文件时间class:#if(${PACKAGE_NAME}&amp;&amp;${PACKAGE_NAME}!=&quot;&quot;)package${PACKAGE_NAME};#end#parse(&quot;FileHeader.java&quot;)/***@author:${USER}*@date:${YEAR}-${MONTH}-${DAY}${HOUR}:${MINUTE}**/publicclass${NAME}{}Interface:#if(${PACKAGE_NAME}&amp;&amp;${PACKAGE_NAME}!=&quot;&quot;)package${PACKAGE_NAME};#end#parse(&quot;FileHeader.java&quot;)/***@author:${USER}*@date:${YEAR}-${MONTH}-${DAY}${HOUR}:${MINUTE}**/publicinterface${NAME}{}Enum:#if(${PACKAGE_NAME}&amp;&amp;${PACKAGE_NAME}!=&quot;&quot;)package${PACKAGE_NAME};#end#parse(&quot;FileHeader.java&quot;)/***@author:${USER}*@date:${YEAR}-${MONTH}-${DAY}${HOUR}:${MINUTE}**/publicenum${NAME}{}AnnotationType:#if(${PACKAGE_NAME}&amp;&amp;${PACKAGE_NAME}!=&quot;&quot;)package${PACKAGE_NAME};#end#parse(&quot;FileHeader.java&quot;)/***@author:${USER}*@date:${YEAR}-${MONTH}-${DAY}${HOUR}:${MINUTE}**/public@interface${NAME}{}2.2.3PostfixCompletion的使用File-&gt;Setting-&gt;Editor-&gt;General-&gt;PostfixCompletion-&gt;enablepostcompletion(默认开启的)具体的使用方法见模板,输入相应代码按Tab键2.2.4设置Maven仓库Build,Execution,Deployment-&gt;BuildTools-&gt;MavenMavenhomedirectory:本地Maven程序目录Usersettingfile:本地Maven程序目录使用的配置文件地址Localrepository:本地Maven仓库设置好Maven仓库，否则有关maven的项目，总会在用户目录创建多余的.m2文件夹并且开始直接自己同步。2.2.5自动导包与自动移除依赖OtherSettings-&gt;AutoImport-&gt;Addunambiguousimportsonthefly✔勾选OtherSettings-&gt;AutoImport-&gt;Optimizeimportsonthefly(forcurrentproject)✔勾选3.项目设置3.1方法横线分割File-&gt;Settings-&gt;Editor-&gt;General-&gt;Appearance-&gt;Showmethodseparators✔勾选3.2字体与大小File-&gt;Settings-&gt;Editor-&gt;Font-&gt;16，可以同时设置字体编程字体推荐:JetBrainsMono.ttf下载地址:http://pan.baidu.com/s/1kVoF32RMicrosoftYaHeiConsolasMicrosoftYaHeiMono3.3项目默认打开地址File-&gt;Settings-&gt;Appearance&amp;Behavior-&gt;SystemSettings-&gt;ProjectOpening-&gt;Defaultdirectory3.4护眼背景色使用过HBuilder之后，被护眼色蛊惑[说明链接]，修改Idea的背景色为FAF6E6。File-&gt;Settings-&gt;Editor-&gt;ColorScheme-&gt;General-&gt;Text-&gt;Defaulttext-&gt;Background-&gt;🖊FAF6E63.4关于主题色推荐的主题网站推荐的主题http://color-themes.com/?view=indexhbuilderhttp://www.easycolor.cc/intelliJidea/list.htmlModulorLighthttp://www.themesmap.com/moonhttp://www.riaway.com/Solfingreen_themeSolarizedLight(Alternate)3.5修改注释空行依次选择Setting-&gt;Editor-&gt;CodeStyle-&gt;Java,选择CodeGeneration，取消Linecommentatfirstcolumn和Blockcommentatfirstcolumn的选中即可。3.6路径变量设置KOTLIN_BUNDLEDMAVEN_REPOSITORY4.IDEA程序缓存及设置文件路径修改修改Idea的一般文件设置路径，防止重装系统需要重新配置，新配置路径为程序同级目录的上层目录.IntelliJIdea中。#Use${idea.home.path}macrotospecifylocationrelativetoIDEinstallationhome.#Use${xxx}wherexxxisanyJavaproperty(includingdefinedinpreviouslinesofthisfile)torefertoitsvalue.#NoteforWindowsusers:pleasemakesureyou'reusingforwardslashes(e.g.c:/idea/system).#---------------------------------------------------------------------#UncommentthisoptionifyouwanttocustomizepathtoIDEconfigfolder.Makesureyou'reusingforwardslashes.#---------------------------------------------------------------------#idea.config.path=${user.home}/.IntelliJIdea/configidea.config.path=${idea.home.path}/../.IntelliJIdea/config#---------------------------------------------------------------------#UncommentthisoptionifyouwanttocustomizepathtoIDEsystemfolder.Makesureyou'reusingforwardslashes.#---------------------------------------------------------------------#idea.system.path=${user.home}/.IntelliJIdea/systemidea.system.path=${idea.home.path}/../.IntelliJIdea/system#---------------------------------------------------------------------#Uncommentthisoptionifyouwanttocustomizepathtouserinstalledpluginsfolder.Makesureyou'reusingforwardslashes.#---------------------------------------------------------------------#idea.plugins.path=${idea.config.path}/pluginsidea.plugins.path=${idea.config.path}/plugins#---------------------------------------------------------------------#UncommentthisoptionifyouwanttocustomizepathtoIDElogsfolder.Makesureyou'reusingforwardslashes.#---------------------------------------------------------------------#idea.log.path=${idea.system.path}/logidea.log.path=${idea.system.path}/log5.快捷键快捷键介绍Alt+回车导入包,自动修正Ctrl+N查找类Ctrl+Shift+N查找文件Ctrl+Alt+L格式化代码Ctrl+Alt+O优化导入的类和包Alt+Insert生成代码(如get,set方法,构造函数等)Ctrl+E或者Alt+Shift+C最近更改的代码Ctrl+R替换文本Ctrl+F查找文本Ctrl+Shift+Space自动补全代码Ctrl+空格代码提示Ctrl+Alt+Space类名或接口名提示Ctrl+P方法参数提示Ctrl+Shift+Alt+N查找类中的方法或变量Alt+Shift+C对比最近修改的代码Shift+F6重构-重命名Ctrl+X删除行Ctrl+D复制行Ctrl+/或Ctrl+Shift+/注释（//或者/.../）Ctrl+J自动代码Ctrl+E最近打开的文件Ctrl+H显示类结构图Ctrl+Q显示注释文档Alt+F1查找代码所在位置Alt+1快速打开或隐藏工程面板Ctrl+Alt+left/right返回至上次浏览的位置Alt+left/right切换代码视图Alt+Up/Down在方法间快速移动定位Ctrl+Shift+Up/Down代码向上/下移动F2或Shift+F2高亮错误或警告快速定位常用快捷键1执行(run)alt+r2提示补全(ClassNameCompletion)alt+/3单行注释ctrl+/4多行注释ctrl+shift+/5向下复制一行(DuplicateLines)ctrl+alt+down6删除一行或选中行(deleteline)ctrl+d7向下移动行(movestatementdown)alt+down8向上移动行(movestatementup)alt+up9向下开始新的一行(startnewline)shift+enter10向上开始新的一行(StartNewLinebeforecurrent)ctrl+shift+enter11如何查看源码(class)ctrl+选中指定的结构或ctrl+shift+t12万能解错/生成返回值变量alt+enter13退回到前一个编辑的页面(back)alt+left14进入到下一个编辑的页面(针对于上条)(forward)alt+right15查看继承关系(typehierarchy)F416格式化代码(reformatcode)ctrl+shift+F17提示方法参数类型(ParameterInfo)ctrl+alt+/18复制代码ctrl+c19撤销ctrl+z20反撤销ctrl+y21剪切ctrl+x22粘贴ctrl+v23保存ctrl+s24全选ctrl+a25选中数行，整体往后移动tab26选中数行，整体往前移动shift+tab27查看类的结构：类似于eclipse的outlinectrl+o28重构：修改变量名与方法名(rename)alt+shift+r29大写转小写/小写转大写(togglecase)ctrl+shift+y30生成构造器/get/set/toStringalt+shift+salt+insert31查看文档说明(quickdocumentation)F232收起所有的方法(collapseall)alt+shift+c33打开所有方法(expandall)alt+shift+x34打开代码所在硬盘文件夹(showinexplorer)ctrl+shift+x35生成try-catch等(surroundwith)alt+shift+z36局部变量抽取为成员变量(introducefield)alt+shift+f37查找/替换(当前)ctrl+f38查找(全局)ctrl+h39查找文件doubleShift40查看类的继承结构图(ShowUMLDiagram)ctrl+shift+u41查看方法的多层重写结构(methodhierarchy)ctrl+alt+h42添加到收藏(addtofavorites)ctrl+alt+f43抽取方法(ExtractMethod)alt+shift+m44打开最近修改的文件(RecentlyFiles)ctrl+E45关闭当前打开的代码栏(close)ctrl+w46关闭打开的所有代码栏(closeall)ctrl+shift+w47快速搜索类中的错误(nexthighlightederror)ctrl+shift+q48选择要粘贴的内容(ShowinExplorer)ctrl+shift+v49查找方法在哪里被调用(CallHierarchy)ctrl+shift+h6.常用插件插件名称插件介绍Keypromoter快捷键提示CamelCase驼峰式命名和下划线命名交替变化CheckStyle-IDEA代码样式检查FindBugs-IDEA代码Bug检查Statistic代码统计JRebelPlugin热部署CodeGlance在编辑代码最右侧，显示一块代码小地图GsonFormat把JSON字符串直接实例化成类AlibabaJavaCodingGuidelines阿里巴巴java代码规约FreeMybatispluginMybatis插件MavenHelperMaven插件参考链接：https://www.jianshu.com/p/320d82d405ad7.开启多行标签Setting—&gt;Editor—&gt;General—&gt;EditorTabs，或者打开设置直接搜索tab，下面还有最大标签设置，截图是默认只显示一行，取消即可多行显示","link":"https://zdylzdyl.github.io/post/idea_config/"}]}